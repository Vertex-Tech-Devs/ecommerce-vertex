{
  "version": 3,
  "sources": ["src/app/features/admin/components/attributes/attribute-modal/attribute-modal.component.ts", "src/app/features/admin/components/attributes/attribute-modal/attribute-modal.component.html"],
  "sourcesContent": ["import { Component, OnInit, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormBuilder, FormGroup, FormArray, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { Subject } from 'rxjs';\nimport { Attribute } from '@core/models/attribute.model';\n\n@Component({\n  selector: 'app-attribute-modal',\n  standalone: true,\n  imports: [CommonModule, ReactiveFormsModule],\n  templateUrl: './attribute-modal.component.html',\n  styleUrls: ['./attribute-modal.component.scss']\n})\nexport class AttributeModalComponent implements OnInit {\n\n  public title: string = 'Nuevo Atributo';\n  public attribute?: Attribute;\n  public onClose: Subject<Partial<Attribute> | null> = new Subject();\n\n  public bsModalRef = inject(BsModalRef);\n  private fb = inject(FormBuilder);\n  public attributeForm!: FormGroup;\n\n  ngOnInit(): void {\n    if (this.attribute) {\n      this.title = 'Editar Atributo';\n    }\n\n    this.attributeForm = this.fb.group({\n      name: [\n        this.attribute?.name || '',\n        [Validators.required, Validators.minLength(3)],\n      ],\n      values: this.fb.array(\n        this.attribute?.values ? this.attribute.values.map(val => this.fb.control(val, Validators.required)) : []\n      )\n    });\n  }\n\n  get name() {\n    return this.attributeForm.get('name');\n  }\n\n  get values(): FormArray {\n    return this.attributeForm.get('values') as FormArray;\n  }\n\n  addValue(): void {\n    if (this.values.length >= 50) return;\n    this.values.push(this.fb.control('', Validators.required));\n  }\n\n  removeValue(index: number): void {\n    this.values.removeAt(index);\n  }\n\n  save(): void {\n    if (this.attributeForm.invalid) {\n      this.attributeForm.markAllAsTouched();\n      return;\n    }\n    \n    const formData = this.attributeForm.value;\n    \n    const rawValues = this.values.getRawValue() as any[];\n\n    const cleanedValues: string[] = rawValues\n      .map(val => String(val ?? '').trim())\n      .filter(val => val.length > 0);\n\n    const uniqueValues: string[] = [...new Set(cleanedValues)];\n\n    this.onClose.next({\n      name: formData.name,\n      values: uniqueValues\n    });\n    this.bsModalRef.hide();\n  }\n\n  cancel(): void {\n    this.onClose.next(null);\n    this.bsModalRef.hide();\n  }\n}", "<div class=\"modal-header modal-header-custom\">\n  <h4 class=\"modal-title w-100 text-center\">{{ title }}</h4>\n  <button type=\"button\" class=\"btn-close btn-close-white\" aria-label=\"Close\" (click)=\"cancel()\"></button>\n</div>\n\n<div class=\"modal-body\">\n  <form [formGroup]=\"attributeForm\" (ngSubmit)=\"save()\">\n    \n    <div class=\"mb-3\">\n      <label for=\"attribute-name\" class=\"form-label\">Nombre del Atributo</label>\n      <input\n        type=\"text\"\n        id=\"attribute-name\"\n        class=\"form-control\"\n        formControlName=\"name\"\n        [ngClass]=\"{ 'is-invalid': name?.invalid && (name?.dirty || name?.touched) }\"\n        placeholder=\"Ej: Talle\"\n      />\n      @if (name?.invalid && (name?.dirty || name?.touched)) {\n        <div class=\"invalid-feedback\">\n          <div>El nombre es obligatorio (mín. 3 caracteres).</div>\n        </div>\n      }\n    </div>\n\n    <hr class=\"my-4\">\n\n    <div class=\"d-flex justify-content-between align-items-center mb-3\">\n      <label class=\"form-label mb-0\">Valores del Atributo</label>\n      <button type=\"button\" class=\"btn btn-outline-success btn-sm\" (click)=\"addValue()\">\n        <i class=\"bi bi-plus-lg\"></i> Añadir Valor\n      </button>\n    </div>\n\n    <div formArrayName=\"values\">\n      @for (valueControl of values.controls; track i; let i = $index) {\n        <div class=\"input-group mb-2\">\n          <input\n            type=\"text\"\n            [formControlName]=\"i\"\n            class=\"form-control\"\n            placeholder=\"Ej: M\"\n            [ngClass]=\"{ 'is-invalid': valueControl.invalid && valueControl.touched }\"\n            (keydown.enter)=\"$event.preventDefault(); addValue()\"\n          />\n          <button class=\"btn btn-outline-danger\" type=\"button\" (click)=\"removeValue(i)\" title=\"Eliminar valor\">\n            <i class=\"bi bi-trash\"></i>\n          </button>\n        </div>\n      }\n      @if (values.controls.length === 0) {\n        <div class=\"alert alert-light text-center border\">\n          Añade al menos un valor para este atributo.\n        </div>\n      }\n    </div>\n\n  </form>\n</div>\n\n<div class=\"modal-footer\">\n  <button type=\"button\" class=\"btn btn-secondary\" (click)=\"cancel()\">Cancelar</button>\n  <button type=\"button\" class=\"btn btn-save-gradient\" (click)=\"save()\" [disabled]=\"attributeForm.invalid\">\n    Guardar\n  </button>\n</div>"],
  "mappings": "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",
  "names": []
}
