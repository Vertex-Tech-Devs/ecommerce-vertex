{
  "version": 3,
  "sources": ["src/app/features/admin/components/client/client-details/client-details.component.ts", "src/app/features/admin/components/client/client-details/client-details.component.html"],
  "sourcesContent": ["import { Component, OnInit, OnDestroy, inject } from '@angular/core';\nimport { CommonModule, DatePipe } from '@angular/common';\nimport { ActivatedRoute, Router, RouterModule } from '@angular/router';\nimport { Subscription, Observable } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\n\nimport { ClientService } from '../../../../../core/services/client.service';\nimport { Client } from '../../../../../core/models/client.model';\nimport { Order } from '../../../../../core/models/order.model';\n\n@Component({\n  selector: 'app-client-details',\n  standalone: true,\n  imports: [\n    CommonModule,\n    RouterModule,\n    DatePipe,\n  ],\n  templateUrl: './client-details.component.html',\n  styleUrls: ['./client-details.component.scss'],\n})\nexport class ClientDetailsComponent implements OnInit, OnDestroy {\n  clientEmail: string | null = null;\n  clientDetails: Client | undefined;\n  clientOrders$!: Observable<Order[]>;\n\n  private routeSubscription: Subscription | undefined;\n  private clientSubscription: Subscription | undefined;\n\n\n  private _route = inject(ActivatedRoute);\n  private _router = inject(Router);\n  private _clientService = inject(ClientService);\n\n  constructor() { }\n\n  ngOnInit(): void {\n    this.routeSubscription = this._route.paramMap.pipe(\n      switchMap(params => {\n        this.clientEmail = params.get('email');\n        if (this.clientEmail) {\n          console.log('Cargando detalles para el cliente con email:', this.clientEmail);\n          this.loadClientDetails(this.clientEmail);\n          return this._clientService.getOrdersByClientEmail(this.clientEmail);\n        } else {\n          console.warn('No se encontró el email del cliente en la URL.');\n          this._router.navigate(['/admin/customers']);\n          return new Observable<Order[]>();\n        }\n      })\n    ).subscribe(\n      orders => {\n        this.clientOrders$ = new Observable(observer => {\n          observer.next(orders);\n          observer.complete();\n        });\n      },\n      error => console.error('Error al cargar los pedidos del cliente:', error)\n    );\n  }\n\n  loadClientDetails(email: string): void {\n    this.clientSubscription = this._clientService.getClients().subscribe({\n      next: (clients) => {\n        this.clientDetails = clients.find((client) => client.email === email);\n        if (!this.clientDetails) {\n          console.warn(`Cliente con email ${email} no encontrado.`);\n          this._router.navigate(['/admin/customers']);\n        }\n      },\n      error: (err) => {\n        console.error('Error al cargar detalles del cliente:', err);\n      },\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.routeSubscription?.unsubscribe();\n    this.clientSubscription?.unsubscribe();\n  }\n\n  goBackToList(): void {\n    this._router.navigate(['/admin/customers']);\n  }\n}\n", "<div class=\"container-fluid my-4\">\n  <div class=\"card-gradient-wrapper\">\n    <div class=\"card list-card shadow-sm\">\n      <div class=\"card-body\">\n        <div class=\"d-flex justify-content-between align-items-center mb-4\">\n          <h2 class=\"card-title mb-0\">\n            Detalles del Cliente\n          </h2>\n          <button class=\"btn btn-outline-secondary btn-sm\" (click)=\"goBackToList()\">\n            <i class=\"bi bi-arrow-left\"></i> Volver a Clientes\n          </button>\n        </div>\n\n        @if (clientDetails) {\n          <div class=\"card-gradient-wrapper mb-4\">\n            <div class=\"card details-sub-card\">\n              <div class=\"card-header\">\n                <h3 class=\"card-title mb-0\">\n                  <i class=\"bi bi-person-circle me-2\"></i>\n                  {{ clientDetails.fullName }}\n                </h3>\n              </div>\n              <div class=\"card-body\">\n                <div class=\"row\">\n                  <div class=\"col-md-6\">\n                    <p class=\"card-text\"><strong>Email:</strong> {{ clientDetails.email }}</p>\n                    <p class=\"card-text mb-md-0\"><strong>Teléfono:</strong> {{ clientDetails.phone }}</p>\n                  </div>\n                  <div class=\"col-md-6\">\n                    <p class=\"card-text\"><strong>Cliente desde:</strong> {{ clientDetails.firstOrderDate | date:\"dd/MM/yyyy\" }}</p>\n                    <p class=\"card-text mb-0\"><strong>N.º de Pedidos:</strong> {{ clientDetails.numberOfOrders }}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        }\n\n        <h4><i class=\"bi bi-receipt-cutoff me-2\"></i>Historial de Pedidos</h4>\n        <div class=\"table-responsive\">\n          <table class=\"table table-hover align-middle details-table\">\n            <thead>\n              <tr>\n                <th scope=\"col\">ID Pedido</th>\n                <th scope=\"col\">Fecha</th>\n                <th scope=\"col\" class=\"text-end\">Total</th>\n                <th scope=\"col\" class=\"text-center\">Estado</th>\n                <th scope=\"col\" class=\"text-center\">Acciones</th>\n              </tr>\n            </thead>\n            <tbody>\n              @if (clientOrders$ | async; as orders) {\n                @for (order of orders; track order.id) {\n                  <tr>\n                    <td data-label=\"ID Pedido\">{{ order.id }}</td>\n                    <td data-label=\"Fecha\">{{ order.orderDate | date:\"dd/MM/yyyy HH:mm\" }}</td>\n                    <td data-label=\"Total\" class=\"text-end\">{{ order.total | currency:\"ARS\":\"$\" }}</td>\n                    <td data-label=\"Estado\" class=\"text-center\">\n                      <span class=\"badge\" [ngClass]=\"{\n                        'bg-warning text-dark': order.status === 'pending',\n                        'bg-primary': order.status === 'processing',\n                        'bg-info': order.status === 'shipped',\n                        'bg-success': order.status === 'delivered',\n                        'bg-danger': order.status === 'cancelled'\n                      }\">\n                        {{ order.status | titlecase }}\n                      </span>\n                    </td>\n                    <td data-label=\"Acciones\" class=\"text-center\">\n                      <button class=\"btn btn-outline-primary btn-sm\" [routerLink]=\"['/admin/orders/detail', order.id]\" title=\"Ver Detalles del Pedido\">\n                        <i class=\"bi bi-eye\"></i>\n                      </button>\n                    </td>\n                  </tr>\n                } @empty {\n                  <tr>\n                    <td colspan=\"5\" class=\"text-center text-muted-custom py-4\">\n                      Este cliente aún no tiene pedidos registrados.\n                    </td>\n                  </tr>\n                }\n              } @else {\n                <tr>\n                  <td colspan=\"5\" class=\"text-center py-5\">\n                    <div class=\"spinner-border text-primary\" role=\"status\">\n                      <span class=\"visually-hidden\">Cargando historial...</span>\n                    </div>\n                  </td>\n                </tr>\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  @if (!clientDetails && clientEmail) {\n    <div class=\"alert alert-warning text-center mt-4\">\n      No se encontraron detalles para el cliente con el email: {{ clientEmail }}\n    </div>\n  }\n</div>\n"],
  "mappings": "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",
  "names": []
}
