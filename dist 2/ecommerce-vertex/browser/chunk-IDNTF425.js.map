{
  "version": 3,
  "sources": ["src/app/features/admin/components/attributes/attributes-list/attributes-list.component.ts", "src/app/features/admin/components/attributes/attributes-list/attributes-list.component.html"],
  "sourcesContent": ["import { Component, OnInit, OnDestroy, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Observable, Subscription } from 'rxjs';\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\nimport { Attribute } from '@core/models/attribute.model';\nimport { AttributeService } from '@core/services/attribute.service';\nimport { SweetAlertService } from '@core/services/sweet-alert.service';\nimport { AttributeModalComponent } from '../attribute-modal/attribute-modal.component';\n\n@Component({\n  selector: 'app-attributes-list',\n  standalone: true,\n  imports: [CommonModule],\n  templateUrl: './attributes-list.component.html',\n  styleUrls: ['./attributes-list.component.scss'],\n})\nexport class AttributesListComponent implements OnInit, OnDestroy {\n\n  private attributeService = inject(AttributeService);\n  private modalService = inject(BsModalService);\n  private sweetAlertService = inject(SweetAlertService);\n\n  public attributes$!: Observable<Attribute[]>;\n  private bsModalRef?: BsModalRef;\n  private modalSubscription?: Subscription;\n\n  ngOnInit(): void {\n    this.attributes$ = this.attributeService.getAttributes();\n  }\n\n  ngOnDestroy(): void {\n    this.modalSubscription?.unsubscribe();\n  }\n\n  openAttributeModal(attribute?: Attribute): void {\n    const initialState = attribute ? { attribute: { ...attribute } } : {};\n    this.bsModalRef = this.modalService.show(AttributeModalComponent, {\n      initialState,\n      class: 'modal-lg modal-dialog-centered',\n    });\n\n    this.modalSubscription = this.bsModalRef.content.onClose.subscribe((result: Partial<Attribute> | null) => {\n      if (result) {\n        if (attribute && attribute.id) {\n          this.updateAttribute(attribute.id, result);\n        } else {\n          this.addAttribute(result as Attribute);\n        }\n      }\n    });\n  }\n\n  private addAttribute(attributeData: Attribute): void {\n    this.attributeService.addAttribute(attributeData)\n      .then(() => this.sweetAlertService.success('¡Éxito!', 'Atributo creado correctamente.'))\n      .catch(err => this.sweetAlertService.error('Error', 'Hubo un problema al crear el atributo.'));\n  }\n\n  private updateAttribute(id: string, attributeData: Partial<Attribute>): void {\n    this.attributeService.updateAttribute(id, attributeData)\n      .then(() => this.sweetAlertService.success('¡Éxito!', 'Atributo actualizado correctamente.'))\n      .catch(err => this.sweetAlertService.error('Error', 'Hubo un problema al actualizar el atributo.'));\n  }\n\n  async onDelete(attribute: Attribute): Promise<void> {\n    const isConfirmed = await this.sweetAlertService.confirm(\n      '¿Estás seguro?',\n      `Esta acción eliminará el atributo \"${attribute.name}\". Los productos que lo usen ya no podrán filtrarse por él.`\n    );\n\n    if (isConfirmed && attribute.id) {\n      try {\n        await this.attributeService.deleteAttribute(attribute.id);\n        this.sweetAlertService.success('Eliminado', 'El atributo ha sido eliminado.');\n      } catch (err) {\n        this.sweetAlertService.error('Error', 'Hubo un problema al eliminar el atributo.');\n      }\n    }\n  }\n}", "<div class=\"container-fluid my-4\">\n  <div class=\"card-gradient-wrapper\">\n    <div class=\"card list-card shadow-sm\">\n      <div class=\"card-body\">\n        <h2 class=\"card-title text-center mb-4\">Gestión de Atributos de Producto</h2>\n\n        @if (attributes$ | async; as attributes) {\n          <div class=\"table-responsive\">\n            <table class=\"table table-hover align-middle mb-0 attribute-table\">\n              <thead>\n                <tr>\n                  <th scope=\"col\">Nombre del Atributo</th>\n                  <th scope=\"col\">Valores</th>\n                  <th scope=\"col\" class=\"text-end\">Acciones</th>\n                </tr>\n              </thead>\n              <tbody>\n                @for (attr of attributes; track attr.id) {\n                  <tr>\n                    <td data-label=\"Nombre del Atributo\">{{ attr.name }}</td>\n                    <td data-label=\"Valores\">\n                      <div class=\"values-pills\">\n                        @for (val of attr.values.slice(0, 5); track val) {\n                          <span class=\"badge bg-light text-dark\">{{ val }}</span>\n                        }\n                        @if (attr.values.length > 5) {\n                          <span class=\"badge bg-secondary\">+{{ attr.values.length - 5 }} más</span>\n                        }\n                      </div>\n                    </td>\n                    <td data-label=\"Acciones\" class=\"text-end\">\n                      <button\n                        class=\"btn btn-outline-primary btn-sm me-2\"\n                        (click)=\"openAttributeModal(attr)\"\n                        title=\"Editar\">\n                        <i class=\"bi bi-pencil-square\"></i>\n                      </button>\n                      <button\n                        class=\"btn btn-outline-danger btn-sm\"\n                        (click)=\"onDelete(attr)\"\n                        title=\"Eliminar\">\n                        <i class=\"bi bi-trash\"></i>\n                      </button>\n                    </td>\n                  </tr>\n                } @empty {\n                  <tr>\n                    <td colspan=\"3\">\n                      <div class=\"text-center text-muted-custom py-5\">\n                        <i class=\"bi bi-rulers fs-2 d-block mb-2\"></i>\n                        <p class=\"lead\">Aún no hay atributos creados.</p>\n                        <p>Crea el primero (ej: \"Color\" o \"Talle\") para empezar a definir variantes.</p>\n                      </div>\n                    </td>\n                  </tr>\n                }\n              </tbody>\n            </table>\n          </div>\n        } @else {\n          <div class=\"d-flex justify-content-center py-5\">\n            <div class=\"spinner-border text-primary\" role=\"status\">\n              <span class=\"visually-hidden\">Cargando...</span>\n            </div>\n          </div>\n        }\n      </div>\n    </div>\n  </div>\n</div>\n\n<button\n  class=\"btn btn-primary btn-lg rounded-circle fab-button shadow-lg\"\n  (click)=\"openAttributeModal()\"\n  title=\"Nuevo Atributo\">\n  <i class=\"bi bi-plus-lg\"></i>\n</button>"],
  "mappings": "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",
  "names": []
}
